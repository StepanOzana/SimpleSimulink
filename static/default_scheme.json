{
  "version": 1,
  "nextId": 15,
  "sim": {
    "t0": 0,
    "t1": 25,
    "dt": 0.1,
    "solver": "rk4"
  },
  "elements": [
    {
      "id": "1",
      "type": "Constant",
      "params": {
        "value": 1
      },
      "x": 40,
      "y": 140,
      "angle": 0
    },
    {
      "id": "2",
      "type": "TransferFunction",
      "params": {
        "num": "1",
        "den": "1,1"
      },
      "x": 400,
      "y": 140,
      "angle": 0
    },
    {
      "id": "3",
      "type": "Plot",
      "params": {
        "label": "TF (2).y",
        "n": 1
      },
      "x": 720,
      "y": 140,
      "angle": 0
    },
    {
      "id": "4",
      "type": "TransferFunction",
      "params": {
        "num": "1",
        "den": "1,1"
      },
      "x": 300,
      "y": 300,
      "angle": 0
    },
    {
      "id": "5",
      "type": "TransferFunction",
      "params": {
        "num": "1",
        "den": "1,1"
      },
      "x": 560,
      "y": 300,
      "angle": 0
    },
    {
      "id": "6",
      "type": "Plot",
      "params": {
        "label": "TF (5).y",
        "n": 1
      },
      "x": 840,
      "y": 300,
      "angle": 0
    },
    {
      "id": "7",
      "type": "Constant",
      "params": {
        "value": 1
      },
      "x": -20,
      "y": 400,
      "angle": 0
    },
    {
      "id": "8",
      "type": "TransferFunction",
      "params": {
        "num": "1",
        "den": "1,1"
      },
      "x": 720,
      "y": 460,
      "angle": 0
    },
    {
      "id": "9",
      "type": "Gain",
      "params": {
        "k": -1
      },
      "x": 460,
      "y": 460,
      "angle": 0
    },
    {
      "id": "10",
      "type": "Sum",
      "params": {
        "signs": "++",
        "n": 2
      },
      "x": 220,
      "y": 460,
      "angle": 0
    },
    {
      "id": "11",
      "type": "Plot",
      "params": {
        "label": "TF (8).y",
        "n": 1
      },
      "x": 1000,
      "y": 460,
      "angle": 0
    },
    {
      "id": "12",
      "type": "Constant",
      "params": {
        "value": 0
      },
      "x": 40,
      "y": 20,
      "angle": 0
    },
    {
      "id": "13",
      "type": "PythonSFunction",
      "params": {
        "n_states": 2,
        "x0": "0.5,0",
        "a": 1,
        "b": 1,
        "code": "import numpy as np\n\ndef outputs(t, x, u, p):\n    # output = position\n    return float(x[0])\n\ndef derivatives(t, x, u, p):\n    # parameters\n    d = float(p.get('d', 0.2))   # damping\n    k = float(p.get('k', 1.0))   # nonlinear stiffness\n    b = float(p.get('b', 1.0))   # input gain\n\n    x1 = x[0]   # position\n    x2 = x[1]   # velocity\n\n    dx1 = x2\n    dx2 = -d * x2 - k * np.sin(x1) + b * u\n\n    return np.array([dx1, dx2], dtype=float)\n"
      },
      "x": 400,
      "y": 20,
      "angle": 0
    },
    {
      "id": "14",
      "type": "Plot",
      "params": {
        "n": 1,
        "label": "(not connected)"
      },
      "x": 720,
      "y": 20,
      "angle": 0
    }
  ],
  "links": [
    {
      "source": {
        "id": "1",
        "port": "y"
      },
      "target": {
        "id": "2",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "2",
        "port": "y"
      },
      "target": {
        "id": "3",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "4",
        "port": "y"
      },
      "target": {
        "id": "5",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "5",
        "port": "y"
      },
      "target": {
        "id": "6",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "1",
        "port": "y"
      },
      "target": {
        "id": "4",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "10",
        "port": "y"
      },
      "target": {
        "id": "9",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "9",
        "port": "y"
      },
      "target": {
        "id": "8",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "8",
        "port": "y"
      },
      "target": {
        "id": "10",
        "port": "u2"
      }
    },
    {
      "source": {
        "id": "8",
        "port": "y"
      },
      "target": {
        "id": "11",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "12",
        "port": "y"
      },
      "target": {
        "id": "13",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "13",
        "port": "y"
      },
      "target": {
        "id": "14",
        "port": "u"
      }
    },
    {
      "source": {
        "id": "7",
        "magnet": "portBody",
        "port": "y"
      },
      "target": {
        "id": "10",
        "magnet": "portHit",
        "port": "u1"
      }
    }
  ]
}